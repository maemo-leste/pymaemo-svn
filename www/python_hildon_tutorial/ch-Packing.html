<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. Navigation &mdash; Hildon Tutorial v0.9 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Hildon Tutorial v0.9 documentation" href="index.html" />
    <link rel="next" title="8. Data Selection" href="ch-Selectors.html" />
    <link rel="prev" title="6. Toolbars" href="ch-Toolbars.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ch-Selectors.html" title="8. Data Selection"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ch-Toolbars.html" title="6. Toolbars"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Hildon Tutorial v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="navigation">
<span id="ch-packing"></span><h1>7. Navigation<a class="headerlink" href="#navigation" title="Permalink to this headline">¶</a></h1>
<p>In previous examples only one widget was added to a window so we could simply use a container_add() to &#8220;pack&#8221; it into the window. To pack more than one widget into a window it is necessary to use container widgets.</p>
<p>To develop Hildon user interfaces, you can use any container widget provided by GTK+. For more details, <a class="reference" href="GTK+2.0Tutorial">GTK+ 2.0 Tutorial</a> includes a good introduction to this topic.</p>
<p>Apart from supporting those containers, the Hildon framework also provides a new container widget called HildonPannableArea, a scrolling widget designed for touch screens. This chapter will cover all that is necessary to properly use this widget.</p>
<div class="section" id="pannable-area">
<h2>7.1. Pannable Area<a class="headerlink" href="#pannable-area" title="Permalink to this headline">¶</a></h2>
<p>HildonPannableArea is used to create an area with another widget inside which will be accessible regardless of the size using the touchscreen to scroll it. You may insert any type of widget into a pannable area, and it will be accessible by dragging on the area with the fingers.</p>
<p>This widget can be &#8220;panned&#8221; (scrolled) in any direction using the touchscreen with the fingers. One remarkable characteristic is that the scrolling is &#8220;kinetic&#8221;, meaning that the motion will continue from the initial motion by gradually slowing down to stop.</p>
<p>The use of this widget is very similar to GTK+ scrolled windows. In fact, both widgets implement a similar concept and its APIs are very similar.</p>
<p>To create a new pannable area you can choose either of the following functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">hildon</span><span class="o">.</span><span class="n">PannableArea</span><span class="p">()</span>
<span class="n">hildon</span><span class="o">.</span><span class="n">hildon_pannable_area_new_full</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">vel_min</span><span class="p">,</span> <span class="n">vel_max</span><span class="p">,</span> <span class="n">decel</span><span class="p">,</span> <span class="n">sps</span><span class="p">)</span>
</pre></div>
</div>
<p>The first one creates a new pannable area with the properties set to the default values. The second one allows you to set the value of the most important properties of this widget:</p>
<ul class="simple">
<li>mode : Used to change the behaviour of the pannable area allowing to choose whether to use the &#8220;kinetic&#8221; effect described above.</li>
<li>enabled : Enable or disable finger-scroll.</li>
<li>vel_min, vel_max : Allows developers to adjust how many pixels the child widget will be move per &#8220;frame&#8221;.</li>
<li>decel : Value for the deceleration property.</li>
<li>sps : Amount of scroll events to generate per second.</li>
</ul>
<p>For most applications, default values of these properties will be right and thus, the simpler constructor will be enough. In the Hildon reference manual you can read more about all pannable area&#8217;s properties.</p>
<p>Once the area is created you can then place your object into the pannable window using the following function.</p>
<div class="highlight-python"><pre>def add_with_viewport(self, child)</pre>
</div>
<p>That is a convenience function used to add a child to a GtkViewport, and add the viewport to the pannable area.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Widgets that have native scrolling should be added directly inside a pannable area. For example, widgets such as GtkTextView, GtkTreeView, GtkIconView and GtkLayout should be added by calling add(). Otherwise, panning could not work properly.</p>
</div>
</div>
<div class="section" id="pannable-area-example">
<h2>7.2. Pannable area example<a class="headerlink" href="#pannable-area-example" title="Permalink to this headline">¶</a></h2>
<p>Functions explained above are enough for a simple example. The following example packs a table with 100 toggle buttons into a pannable area.</p>
<div class="section" id="example-of-a-pannable-area">
<h3>7.2.1. Example of a pannable area<a class="headerlink" href="#example-of-a-pannable-area" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Based on C code from:</span>
<span class="c"># &quot;Hildon Tutorial&quot; version 2009-04-28</span>
<span class="c"># Example 5.1, &quot;Example of a pannable area&quot;</span>

<span class="k">import</span> <span class="nn">gtk</span>
<span class="k">import</span> <span class="nn">hildon</span>

<span class="k">def</span> <span class="nf">create_table</span><span class="p">():</span>
    <span class="c"># create a table of 10 by 10 squares. </span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Table</span> <span class="p">(</span><span class="mf">10</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

    <span class="c"># set the spacing to 10 on x and 10 on y </span>
    <span class="n">table</span><span class="o">.</span><span class="n">set_row_spacings</span><span class="p">(</span><span class="mf">10</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">set_col_spacings</span><span class="p">(</span><span class="mf">10</span><span class="p">)</span>

    <span class="n">table</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c"># this simply creates a grid of toggle buttons on the table</span>
    <span class="c"># to demonstrate the scrolled window. */</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">10</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">10</span><span class="p">):</span>
            <span class="n">data_buffer</span> <span class="o">=</span> <span class="s">&quot;button (</span><span class="si">%d</span><span class="s">,</span><span class="si">%d</span><span class="s">)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span><span class="n">data_buffer</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mf">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>

<span class="k">def</span> <span class="nf">app_quit</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">StackableWindow</span><span class="p">()</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">app_quit</span><span class="p">)</span>

    <span class="n">pannable_area</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">PannableArea</span><span class="p">()</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">create_table</span><span class="p">()</span>

    <span class="c"># pack the table into the scrolled window </span>
    <span class="n">pannable_area</span><span class="o">.</span><span class="n">add_with_viewport</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

    <span class="c"># Add the box into the window</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pannable_area</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>In the example above you can see that the following two calls are enough to use a pannable area. The rest of the code of the example is no different to that used in a GTK+ application.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create a new pannable area.</span>
<span class="n">pannable_area</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">PannableArea</span><span class="p">()</span>
<span class="c"># Pack the table into the pannable area</span>
<span class="n">pannable_area</span><span class="o">.</span><span class="n">add_with_viewport</span><span class="p">(</span><span class="n">table</span><span class="p">);</span>
</pre></div>
</div>
<p>To see all the buttons, users can scroll with the fingers. In this example, horizontal and vertical panning are activated as that is needed to allow users to be able to interact both all the widgets. The property &#8220;mov-mode&#8221; controls if the area can scroll horizontally, vertically (default value) or both, using hildon.MOVEMENT_MODE_HORIZ, hildon.MOVEMENT_MODE_VERT or hildon.MOVEMENT_MODE_BOTH, respectively.</p>
</div>
</div>
<div class="section" id="additional-features">
<h2>7.3. Additional features<a class="headerlink" href="#additional-features" title="Permalink to this headline">¶</a></h2>
<p>Pannable areas provide a set of convenience functions that make it easier to move to a certain element inside the area without users interaction.</p>
<p>These functions allow to scroll or jump to a position which ensures that a certain point or a certain child widget is visible for the user.</p>
<p>For example, the first of the functions changes the current position on the pannable area to ensure position (x,y) is visible. The movement is a quick jump. The second function performs a smoothly scroll towards the selected position.</p>
<div class="highlight-python"><pre>def jump_to(self, x, y)
def scroll_to(self, x, y)</pre>
</div>
<p>It is also possible to jump or scroll to a certain descendent of the area using the following functions, the argument should be a reference to a descendent widget.</p>
<div class="highlight-python"><pre>def jump_to_child(self, child)
def scroll_to_child(self, child)</pre>
</div>
<p>Here is a modified version of the previous example. The pannable area is packed into an gtk.VBox and a new button is also added to navigate to the last clicked button.</p>
<div class="section" id="example-of-a-pannable-area-and-a-jump-to-button">
<h3>7.3.1. Example of a pannable area and a &#8220;jump-to&#8221; button<a class="headerlink" href="#example-of-a-pannable-area-and-a-jump-to-button" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Based on C code from:</span>
<span class="c"># &quot;Hildon Tutorial&quot; version 2009-04-28</span>
<span class="c"># Example 5.2, &quot;Example of a pannable area and a &quot;jump-to&quot; button&quot;</span>

<span class="k">import</span> <span class="nn">gtk</span>
<span class="k">import</span> <span class="nn">hildon</span>

<span class="c"># Pointer to the last clicked button</span>
<span class="n">last_clicked_button</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c"># Callabck to set last clicked button</span>
<span class="k">def</span> <span class="nf">clicked</span><span class="p">(</span><span class="n">button</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">last_clicked_button</span>
    <span class="n">last_clicked_button</span> <span class="o">=</span> <span class="n">button</span>

<span class="k">def</span> <span class="nf">go_to_last_clicked</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">pannable_area</span><span class="p">):</span>
    <span class="n">pannable_area</span><span class="o">.</span><span class="n">scroll_to_child</span><span class="p">(</span><span class="n">last_clicked_button</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">create_table</span><span class="p">():</span>

    <span class="c"># create a table of 10 by 10 squares.</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Table</span> <span class="p">(</span><span class="mf">10</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

    <span class="c"># set the spacing to 10 on x and 10 on y</span>
    <span class="n">table</span><span class="o">.</span><span class="n">set_row_spacings</span><span class="p">(</span><span class="mf">10</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">set_col_spacings</span><span class="p">(</span><span class="mf">10</span><span class="p">)</span>

    <span class="n">table</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c"># this simply creates a grid of toggle buttons on the table</span>
    <span class="c"># to demonstrate the scrolled window. </span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">10</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">10</span><span class="p">):</span>
            <span class="n">data_buffer</span> <span class="o">=</span> <span class="s">&quot;button (</span><span class="si">%d</span><span class="s">,</span><span class="si">%d</span><span class="s">)</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span><span class="n">data_buffer</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;clicked&quot;</span><span class="p">,</span> <span class="n">clicked</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mf">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>
  
<span class="k">def</span> <span class="nf">app_quit</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">StackableWindow</span><span class="p">()</span>
    <span class="n">pannable_area</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">PannableArea</span><span class="p">()</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">app_quit</span><span class="p">)</span>

    <span class="n">pannable_area</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s">&quot;mov-mode&quot;</span><span class="p">,</span> <span class="n">hildon</span><span class="o">.</span><span class="n">MOVEMENT_MODE_BOTH</span><span class="p">)</span>

    <span class="n">button</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s">&quot;Go to last clicked button&quot;</span><span class="p">)</span>
    <span class="n">button</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;clicked&quot;</span><span class="p">,</span> <span class="n">go_to_last_clicked</span><span class="p">,</span> <span class="n">pannable_area</span><span class="p">)</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">create_table</span><span class="p">()</span>

    <span class="c"># pack the table into the scrolled window </span>
    <span class="n">pannable_area</span><span class="o">.</span><span class="n">add_with_viewport</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

    <span class="c"># Create a box and pack the widgets into it</span>
    <span class="n">vbox</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>

    <span class="n">vbox</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
    <span class="n">vbox</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">pannable_area</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>

    <span class="c"># Add the box into the window</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>The example used a global variable to store a reference to the last clicked button. This reference will be used by the callback go_to_last_clicked to jump to it by calling one of the navigation functions. This is the function used as a handler for the signal &#8220;clicked&#8221; of the button outside the pannable area.</p>
<p>You can test the different navigation functions by just changing the call in the mentioned callback.</p>
<p>When you use the navigation functions that allow to navigate to a certain child, the widget must be already realized. You can check it with gtk.WidgetFlags.realized. If you want to call it during the initialization process you can use the navigation function inside a callback to the &#8220;realized&#8221; signal.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">7. Navigation</a><ul>
<li><a class="reference" href="#pannable-area">7.1. Pannable Area</a></li>
<li><a class="reference" href="#pannable-area-example">7.2. Pannable area example</a><ul>
<li><a class="reference" href="#example-of-a-pannable-area">7.2.1. Example of a pannable area</a></li>
</ul>
</li>
<li><a class="reference" href="#additional-features">7.3. Additional features</a><ul>
<li><a class="reference" href="#example-of-a-pannable-area-and-a-jump-to-button">7.3.1. Example of a pannable area and a &#8220;jump-to&#8221; button</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="ch-Toolbars.html"
                                  title="previous chapter">6. Toolbars</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="ch-Selectors.html"
                                  title="next chapter">8. Data Selection</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/ch-Packing.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ch-Selectors.html" title="8. Data Selection"
             >next</a> |</li>
        <li class="right" >
          <a href="ch-Toolbars.html" title="6. Toolbars"
             >previous</a> |</li>
        <li><a href="index.html">Hildon Tutorial v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Nokia Corporation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.3.
    </div>
  </body>
</html>