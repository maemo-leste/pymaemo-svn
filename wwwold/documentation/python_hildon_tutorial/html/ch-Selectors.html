<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Data Selection &mdash; Hildon Tutorial v0.9 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Hildon Tutorial v0.9 documentation" href="index.html" />
    <link rel="next" title="Controls" href="ch-Controls.html" />
    <link rel="prev" title="Navigation" href="ch-Packing.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ch-Controls.html" title="Controls"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ch-Packing.html" title="Navigation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Hildon Tutorial v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>  
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  
  <div class="section" id="data-selection">
<span id="ch-selectors"></span><h1>Data Selection<a class="headerlink" href="#data-selection" title="Permalink to this headline">¶</a></h1>
<p>Hildon provides a set of widgets for data selection specially designed for touchscreens that allows to build simple and easy-to-use interfaces.</p>
<p>The key widget is a selector widget that allows users to select items from one to many predefined lists. It is similar to a combo box but allows several individual pannable columns.</p>
<p>In addition, Hildon also provides a specialized dialog and a specialized button to be used in combination with a selector.</p>
<div class="section" id="touch-selector">
<h2>Touch selector<a class="headerlink" href="#touch-selector" title="Permalink to this headline">¶</a></h2>
<p>hildon.TouchSelector is the mentioned selector widget. This widget can display several pannable columns. Each column is represented by a gtk.TreeModel and single or multiple selection is allowed.</p>
<p>[ SCREENSHOT ]</p>
<div class="section" id="text-columns-example">
<h3>Text Columns Example<a class="headerlink" href="#text-columns-example" title="Permalink to this headline">¶</a></h3>
<p>Let us see the simplest possible example. A selector that shows a single text column.</p>
</div>
<div class="section" id="example-of-a-single-column-selector">
<h3>Example of a single-column selector<a class="headerlink" href="#example-of-a-single-column-selector" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Based on C code from:</span>
<span class="c"># &quot;Hildon Tutorial&quot; version 2009-04-28</span>
<span class="c"># Example 5.6, &quot;Example of a single-column selector&quot;</span>

<span class="k">import</span> <span class="nn">gtk</span>
<span class="k">import</span> <span class="nn">hildon</span>

<span class="k">def</span> <span class="nf">selection_changed</span><span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="n">user_data</span><span class="p">):</span>
    <span class="n">current_selection</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">get_current_text</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&quot;Current selection : </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">current_selection</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">create_simple_selector</span><span class="p">():</span>
    <span class="c">#Create a HildonTouchSelector with a single text column</span>
    <span class="c"># selector = hildon.TouchSelector()</span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">hildon_touch_selector_new_text</span><span class="p">()</span>

    <span class="c"># Set selection mode to allow multiple selection</span>
    <span class="n">selector</span><span class="o">.</span><span class="n">set_column_selection_mode</span><span class="p">(</span><span class="n">hildon</span><span class="o">.</span><span class="n">TOUCH_SELECTOR_SELECTION_MODE_MULTIPLE</span><span class="p">)</span>

    <span class="c"># Set a handler to &quot;changed&quot; signal </span>
    <span class="n">selector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;changed&quot;</span><span class="p">,</span> <span class="n">selection_changed</span><span class="p">)</span>

    <span class="c"># Populate selector </span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">10</span><span class="p">):</span>
        <span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Item </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span>
        <span class="c"># Add item to the column </span>
        <span class="n">selector</span><span class="o">.</span><span class="n">append_text</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">selector</span>

<span class="k">def</span> <span class="nf">app_quit</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">program</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">hildon_program_get_instance</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">set_application_name</span><span class="p">(</span><span class="s">&quot;hildon-touch-selector example program&quot;</span><span class="p">)</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">StackableWindow</span><span class="p">()</span>
    <span class="n">program</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

    <span class="c"># Create touch selector</span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">create_simple_selector</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">app_quit</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>A hildon.TouchSelector with a single text column is created in this program using the following convenience constructor.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">hildon</span><span class="o">.</span><span class="n">touch_selector_new_text</span><span class="p">()</span>
</pre></div>
</div>
<p>To add text to a selector created by calling the constructor above you can simply use the function .</p>
<div class="highlight-python"><pre>def append(self, text):</pre>
</div>
<p>Alternatively, you could use prepend_text() or insert_text() to add text to the selector in different positions.</p>
<p>The desired selection mode can be set with the function . In the example, the mode was set to allow multiple selection.</p>
<div class="highlight-python"><pre>def set_column_selection_mode(self, mode):</pre>
</div>
<p>This example shows a very common use case of this widget. Next section shows how to build a more complex selector with several columns of different types.</p>
<p>Also a simple function was set as a handler for the &#8220;changed&#8221; signal. This signal is emitted each time the selected items change.</p>
<p>The callback retrieves a text representation of the currently selected items in the selector by calling get_current_text(). By default this function will return a concatenation of the items selected, separated by a comma.</p>
<p>To change how the text representation is generated you can set your own function. The function can set by calling set_print_func() and should have following signature.</p>
<div class="highlight-python"><pre>def user_function (selector):</pre>
</div>
</div>
<div class="section" id="custom-columns">
<h3>Custom columns<a class="headerlink" href="#custom-columns" title="Permalink to this headline">¶</a></h3>
<p>In the previous section, a selector with a text column was created. That is probably the most common use case of touch selectors. Convenience functions to deal with text columns was used. But you can also set other type of columns.</p>
<p>Since each column in this widget is basically a treeview, you can use the same display to different data and in different ways as you would do with a gtk.Treeview. Thus, you can use the gtk.CellRenderers available in GTK+ to display the data on each cell.</p>
<p>This section explains how to build a selector within a column displaying stock icons. Firstly, let us take a look on the function which will be used to append new columns to a touchable selector.</p>
<div class="highlight-python"><pre>def append_column(self, model, cell_renderer, ...):</pre>
</div>
<p>This functions adds a new column to the widget, whose data will be obtained from the passed model. You should also pass a gtk.CellRenderer and a list of pairs property/value which will be set as attributes of the renderer.</p>
<p>This function basically adds a gtk.TreeView to the widget, so if you know how gtk.Treeviews work you do won&#8217;t have problems with it, otherwise it is highly recommended that you check that GTK+ widget before (LINKS TO GTK TUTORIAL / REFERENCE )</p>
<p>Next example shows how to set a column to display images in a selector. To keep the example clear enough, only the function which creates the selector will be shown.</p>
</div>
<div class="section" id="example-of-a-selector-with-a-custom-column">
<h3>Example of a selector with a custom column<a class="headerlink" href="#example-of-a-selector-with-a-custom-column" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Based on C code from:</span>
<span class="c"># &quot;Hildon Tutorial&quot; version 2009-04-28</span>
<span class="c"># Example 6.2 &quot;Example of a selector with a custom column&quot;</span>

<span class="k">import</span> <span class="nn">gtk</span>
<span class="k">import</span> <span class="nn">hildon</span>
<span class="k">import</span> <span class="nn">gobject</span>

<span class="k">def</span> <span class="nf">selection_changed</span><span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="n">user_data</span><span class="p">):</span>
    <span class="n">current_selection</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">get_current_text</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&quot;Current selection : </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">current_selection</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">create_customized_selector</span><span class="p">():</span>
    <span class="c"># Create a touch selector </span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">TouchSelector</span><span class="p">()</span>

    <span class="c"># Stock icons will be used for the example</span>
    <span class="n">icon_list</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">stock_list_ids</span><span class="p">()</span>

    <span class="c"># Create model to store selector&#39;s items </span>
    <span class="n">store_icons</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">);</span>

    <span class="c"># Populate model</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">icon_list</span><span class="p">:</span>
        <span class="n">new_iter</span> <span class="o">=</span> <span class="n">store_icons</span><span class="o">.</span><span class="n">append</span><span class="p">()</span>
        <span class="n">store_icons</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">new_iter</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

    <span class="c"># Create and set up a pixbuf renderer to use in the selector </span>
    <span class="n">renderer</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">CellRendererPixbuf</span><span class="p">()</span> 
    <span class="n">renderer</span><span class="o">.</span><span class="n">set_fixed_size</span><span class="p">(</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">100</span><span class="p">)</span>


    <span class="c"># Add the column to the selector</span>
    <span class="c"># FIXME: bug 4646</span>
    <span class="c">#column = selector.append_column(store_icons, renderer, &quot;stock-id&quot;, 0)</span>

    <span class="c"># Set the selection mode</span>
    <span class="n">selector</span><span class="o">.</span><span class="n">set_column_selection_mode</span><span class="p">(</span><span class="n">hildon</span><span class="o">.</span><span class="n">TOUCH_SELECTOR_SELECTION_MODE_MULTIPLE</span><span class="p">)</span>

    <span class="c"># Set the property &quot;text-column&quot; that indicates the column</span>
    <span class="c"># of the model to get the string from</span>
    <span class="n">column</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s">&quot;text-column&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">selector</span>

<span class="k">def</span> <span class="nf">app_quit</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">program</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">hildon_program_get_instance</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">set_application_name</span><span class="p">(</span><span class="s">&quot;hildon-touch-selector example program&quot;</span><span class="p">)</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">StackableWindow</span><span class="p">()</span>
    <span class="n">program</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

    <span class="c"># Create touch selector</span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">create_customized_selector</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">app_quit</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>The first step in the example is to create and populate a gtk.TreeModel. A gtk.ListStore is used in the example. In most use cases of the touchable selectors a gtk.ListStore fits well as selectors were designed to allow users to select from a list of items.</p>
<p>In this case, the model stores a list of GTK+ stock icons identifiers. The following call creates a list store with one column to store strings.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">store_icons</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="p">(</span><span class="n">G_TYPE_STRING</span><span class="p">);</span>
</pre></div>
</div>
<p>The following loop appends all stock identifiers in the newly created model. The identifiers were previously retrieved using gtk.stock_list_ids().</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">icon_list</span><span class="p">:</span>
  <span class="n">new_iter</span> <span class="o">=</span> <span class="n">store_icons</span><span class="o">.</span><span class="n">append</span><span class="p">()</span>
  <span class="n">store_icons</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">new_iter</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>Next step is to set up the renderer which will render each row of the new column. We need a gtk.CellRendererPixbuf to display the stock icons.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">renderer</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">CellRendererPixbuf</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally, we create and append the new column, using the model and renderer previously created.</p>
<p>This call also sets the property &#8220;stock-id&#8221; of the gtk.CellrendererPixbuf. The value is set to 0 which is the number of the column in the gtk.TreeModel that stores the stock-id.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">column</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">append_column</span><span class="p">(</span><span class="n">store_icons</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="s">&quot;stock-id&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Summarizing, setting a new custom column in a touchable selector is quite similar to setting a new column in a normal gtk.Treeview. It is necessary to create a model to store the data and a cell renderer to properly show this data in each row, and finally add the new column.</p>
</div>
</div>
<div class="section" id="picker-dialog-and-picker-buttons">
<h2>Picker Dialog and Picker buttons<a class="headerlink" href="#picker-dialog-and-picker-buttons" title="Permalink to this headline">¶</a></h2>
<p>Normally, you would use hildon.TouchSelector together with a hildon.PickerDialog activated from a button. For most common cases, you should use hildon.PickerButton.</p>
<p>This is the usual way to present a selector to the user. The picker button will open a dialog which presents the selector and properly manages user interaction.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>Previous sections showed you how to create a touchable selector. In the most cases the following step would be to attach the selector to a hildon.PickerButton.</p>
<p>A hildon.PickerButton is a special gtk.Button which displays two labels, title and value, and brings up a hildon.PickerDialog. The user would choose one or several items. A string representation of the chosen items will be displayed in the value label of the picker button.</p>
<p>Below, a modified version of the previous main function is shown, in which you can check how a hildon.PickerButton is created and attached to a selector. Also a callback to catch the signal &#8220;value-changed&#8221; emitted is added.</p>
</div>
<div class="section" id="example-of-a-hildon-picker-button">
<h3>Example of a Hildon picker button<a class="headerlink" href="#example-of-a-hildon-picker-button" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Based on C code from:</span>
<span class="c"># &quot;Hildon Tutorial&quot; version 2009-04-28</span>
<span class="c"># Example 6.3, &quot;Example of a Hildon picker button&quot;</span>

<span class="k">import</span> <span class="nn">gtk</span>
<span class="k">import</span> <span class="nn">hildon</span>
<span class="k">import</span> <span class="nn">gobject</span>

<span class="k">def</span> <span class="nf">on_picker_value_changed</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">user_data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Newly selected value: </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">button</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">app_quit</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">create_customized_selector</span><span class="p">():</span>
    <span class="c"># Create a touch selector </span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">TouchSelector</span><span class="p">()</span>

    <span class="c"># Stock icons will be used for the example</span>
    <span class="n">icon_list</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">stock_list_ids</span><span class="p">()</span>

    <span class="c"># Create model to store selector&#39;s items </span>
    <span class="n">store_icons</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">ListStore</span><span class="p">(</span><span class="n">gobject</span><span class="o">.</span><span class="n">TYPE_STRING</span><span class="p">)</span>

    <span class="c"># Populate model</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">icon_list</span><span class="p">:</span>
        <span class="n">new_iter</span> <span class="o">=</span> <span class="n">store_icons</span><span class="o">.</span><span class="n">append</span><span class="p">()</span>
        <span class="n">store_icons</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">new_iter</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

    <span class="c"># Create and set up a pixbuf renderer to use in the selector </span>
    <span class="n">renderer</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">CellRendererPixbuf</span><span class="p">()</span> 
    <span class="n">renderer</span><span class="o">.</span><span class="n">set_fixed_size</span><span class="p">(</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span> <span class="mf">100</span><span class="p">)</span>


    <span class="c"># Add the column to the selector</span>
    <span class="c"># FIXME: bug 4646</span>
    <span class="n">column</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">append_column</span><span class="p">(</span><span class="n">store_icons</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="s">&quot;stock-id&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>

    <span class="c"># Set the selection mode</span>
    <span class="n">selector</span><span class="o">.</span><span class="n">set_column_selection_mode</span><span class="p">(</span><span class="n">hildon</span><span class="o">.</span><span class="n">TOUCH_SELECTOR_SELECTION_MODE_MULTIPLE</span><span class="p">)</span>

    <span class="c"># Set the property &quot;text-column&quot; that indicates the column</span>
    <span class="c"># of the model to get the string from</span>
    <span class="n">column</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s">&quot;text-column&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">selector</span>

<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">program</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">hildon_program_get_instance</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">set_application_name</span><span class="p">(</span><span class="s">&quot;hildon-touch-selector example program&quot;</span><span class="p">)</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">StackableWindow</span><span class="p">()</span>
    <span class="n">program</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

    <span class="c"># Create touch selector</span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">create_customized_selector</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>

    <span class="c"># Create a picker button</span>
    <span class="n">picker_button</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">PickerButton</span><span class="p">(</span><span class="n">hildon</span><span class="o">.</span><span class="n">SIZE_AUTO</span><span class="p">,</span>
                                        <span class="n">hildon</span><span class="o">.</span><span class="n">BUTTON_ARRANGEMENT_VERTICAL</span><span class="p">)</span>

    <span class="c"># Set a title to the button </span>
    <span class="n">picker_button</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;Select an item&quot;</span><span class="p">)</span>

    <span class="c"># Attach the touch selector to the picker button</span>
    <span class="n">picker_button</span><span class="o">.</span><span class="n">set_selector</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>

    
    <span class="c"># Attach callback to the &quot;value-changed&quot; signal</span>
    <span class="n">picker_button</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;value-changed&quot;</span><span class="p">,</span> <span class="n">on_picker_value_changed</span><span class="p">)</span>

    <span class="c"># Add button to main window</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">picker_button</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">app_quit</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>In the above example a picker button is created. The reference to the attached selector is stored in the property &#8220;touch-selector&#8221; of the picker button. You can use function get_selector() to retrieve the attached selector and set_selector() to attach the selector.</p>
<p>Note that you do not need to take care of the hildon.PickerDialog. The dialog is automatically brought up when users click the picker button and closed when the selection is done.</p>
<p>The dialog shows a button &#8220;Done&#8221; to allow users finish the selection when the touchable selector allows multiple selection. When the selector allows only single selection, the dialog does not show any button and closes when the user tap one item.</p>
<p>The label of the button &#8220;Done&#8221; can be set by using set_done_button_text() and retrieved by using get_done_button_text().</p>
<p>When users finish their selection, the value label on the button automatically changes to show a textual representation of the item or items selected.</p>
<p>In most cases you could want to perform any action when selection is finished. To do that you add a handler to the signal &#8220;value-changed&#8221; of the picker button. In this example the handler attached to &#8220;value-changed&#8221; signal retrieves the value label of the button and prints a debug message.</p>
</div>
</div>
<div class="section" id="touch-selector-entry">
<h2>Touch Selector Entry<a class="headerlink" href="#touch-selector-entry" title="Permalink to this headline">¶</a></h2>
<p>The hildon.TouchSelectorEntry is a selector widget with a text entry that allows users to select an item from a predefined list or to enter a different one in a hildon.Entry. Items can also be searched and selected by typing in the entry.</p>
<p>An additional feature is that the hildon.Entry is auto-completed with the list&#8217;s items as the user types their name.</p>
<div class="section" id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Example above shows how to build a selector to pick a word in a list of words.</p>
</div>
<div class="section" id="example-of-a-hildon-picker-button-with-a-selector-entry">
<h3>Example of a Hildon picker button with a selector entry<a class="headerlink" href="#example-of-a-hildon-picker-button-with-a-selector-entry" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Based on C code from:</span>
<span class="c"># &quot;Hildon Tutorial&quot; version 2009-04-28</span>
<span class="c"># Example 6.4, &quot;Hildon picker button with a selector entry&quot;</span>

<span class="k">import</span> <span class="nn">gtk</span>
<span class="k">import</span> <span class="nn">hildon</span>

<span class="k">def</span> <span class="nf">app_quit</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&quot;AC/DC&quot;</span><span class="p">,</span>
        <span class="s">&quot;Aerosmith&quot;</span><span class="p">,</span>
        <span class="s">&quot;Alice in Chains&quot;</span><span class="p">,</span>
        <span class="s">&quot;Black Sabbath&quot;</span><span class="p">,</span>
        <span class="s">&quot;Carcass&quot;</span><span class="p">,</span>
        <span class="s">&quot;Danzig&quot;</span><span class="p">,</span>
        <span class="s">&quot;Deep Purple&quot;</span><span class="p">,</span>
        <span class="s">&quot;Dream Theater&quot;</span><span class="p">,</span>
        <span class="s">&quot;Eric Clapton&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">program</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">hildon_program_get_instance</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">set_application_name</span><span class="p">(</span><span class="s">&quot;hildon-touch-selector example program&quot;</span><span class="p">)</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">StackableWindow</span><span class="p">()</span>
    <span class="n">program</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

    <span class="c"># Create a picker button</span>
    <span class="n">picker_button</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">PickerButton</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">HILDON_SIZE_AUTO</span><span class="p">,</span>
                                        <span class="n">hildon</span><span class="o">.</span><span class="n">BUTTON_ARRANGEMENT_VERTICAL</span><span class="p">)</span>

    <span class="c"># Set a title to the button </span>
    <span class="n">picker_button</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;Pick a band!&quot;</span><span class="p">)</span>

    <span class="c"># Create a touch selector entry */</span>
    <span class="c"># FIXME: bug 4647</span>
    <span class="n">selector</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">hildon_touch_selector_entry_new_text</span><span class="p">()</span>
    
    <span class="c"># Populate the selector</span>
    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">:</span>
        <span class="n">selector</span><span class="o">.</span><span class="n">append_text</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>

    <span class="c"># Attach the touch selector to the picker button</span>
    <span class="n">picker_button</span><span class="o">.</span><span class="n">set_selector</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>

    <span class="c"># Add button to main window</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">picker_button</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">app_quit</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>As you can see in the example above, the use of this widget is closely similar to the use of a normal touchable selector.</p>
<p>You can also use custom columns in a hildon.TouchableEntry but always at least a column should be a text column. The text column is indicated by the property &#8220;text_column&#8221; which you should set with set_text_column().</p>
</div>
</div>
<div class="section" id="pre-built-selectors">
<h2>Pre-built Selectors<a class="headerlink" href="#pre-built-selectors" title="Permalink to this headline">¶</a></h2>
<p>The widgets hildon.DateButton and hildon.TimeButton are buttons displaying and allowing the selection of date and time, respectively. Developers could use them directly instead of building their own date or time selectors.</p>
<p>Both widgets are specialized picker buttons with a convenient touchable selector attached that you can directly use in your application.</p>
<p>Here a simple application using a hildon.DateButton.</p>
<div class="section" id="example-of-a-hildon-date-button">
<h3>Example of a Hildon date button<a class="headerlink" href="#example-of-a-hildon-date-button" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Based on C code from:</span>
<span class="c"># &quot;Hildon Tutorial&quot; version 2009-04-28</span>
<span class="c"># Example 6.5, &quot;Example of a Hildon date button&quot;</span>

<span class="k">import</span> <span class="nn">gtk</span>
<span class="k">import</span> <span class="nn">hildon</span>

<span class="k">def</span> <span class="nf">app_quit</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">program</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">hildon_program_get_instance</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">set_application_name</span><span class="p">(</span><span class="s">&quot;hildon-touch-selector example program&quot;</span><span class="p">)</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">StackableWindow</span><span class="p">()</span>
    <span class="n">program</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

    <span class="c"># Create a date picker</span>
    <span class="n">date_button</span> <span class="o">=</span> <span class="n">hildon</span><span class="o">.</span><span class="n">DateButton</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">HILDON_SIZE_AUTO</span><span class="p">,</span>
                                    <span class="n">hildon</span><span class="o">.</span><span class="n">BUTTON_ARRANGEMENT_VERTICAL</span><span class="p">)</span>

    <span class="c"># Set a title to the button</span>
    <span class="n">date_button</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;Select an item&quot;</span><span class="p">)</span>

    <span class="c"># Add button to main window </span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">date_button</span><span class="p">)</span>

    
    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">app_quit</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Data Selection</a><ul>
<li><a class="reference external" href="#touch-selector">Touch selector</a><ul>
<li><a class="reference external" href="#text-columns-example">Text Columns Example</a></li>
<li><a class="reference external" href="#example-of-a-single-column-selector">Example of a single-column selector</a></li>
<li><a class="reference external" href="#custom-columns">Custom columns</a></li>
<li><a class="reference external" href="#example-of-a-selector-with-a-custom-column">Example of a selector with a custom column</a></li>
</ul>
</li>
<li><a class="reference external" href="#picker-dialog-and-picker-buttons">Picker Dialog and Picker buttons</a><ul>
<li><a class="reference external" href="#example">Example</a></li>
<li><a class="reference external" href="#example-of-a-hildon-picker-button">Example of a Hildon picker button</a></li>
</ul>
</li>
<li><a class="reference external" href="#touch-selector-entry">Touch Selector Entry</a><ul>
<li><a class="reference external" href="#id1">Example</a></li>
<li><a class="reference external" href="#example-of-a-hildon-picker-button-with-a-selector-entry">Example of a Hildon picker button with a selector entry</a></li>
</ul>
</li>
<li><a class="reference external" href="#pre-built-selectors">Pre-built Selectors</a><ul>
<li><a class="reference external" href="#example-of-a-hildon-date-button">Example of a Hildon date button</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="ch-Packing.html" title="previous chapter">Navigation</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="ch-Controls.html" title="next chapter">Controls</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/ch-Selectors.txt">Show Source</a></li>
            </ul>
          <h3>Quick search</h3>
            <form class="search" action="search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ch-Controls.html" title="Controls"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ch-Packing.html" title="Navigation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Hildon Tutorial v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Nokia Corporation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.5.2.
    </div>
  </body>
</html>